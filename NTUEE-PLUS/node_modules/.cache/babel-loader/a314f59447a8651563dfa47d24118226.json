{"ast":null,"code":"$(document).ready(function () {\n  $(\"#loginForm\").validate({\n    rules: {\n      Login_username_input: {\n        required: true,\n        minlength: 9,\n        maxlength: 9\n      },\n      Login_password_input: {\n        required: true,\n        minlength: 5\n      },\n      agree: \"required\"\n    },\n    messages: {\n      Login_username_input: {\n        required: \"請輸入學號\",\n        minlength: \"學號長度錯誤\",\n        maxlength: \"學號長度錯誤\"\n      },\n      Login_password_input: {\n        required: \"請輸入密碼\",\n        minlength: \"密碼長度只少5個字元\"\n      }\n    }\n  }); //设置cookie\n\n  /*function setCookie(name,psw,idate){\r\n  var oDate = new Date();\r\n  oDate.setDate(oDate.getDate()+idate)\r\n  document.cookie = name+'='+psw+';expires'+idate;\r\n  }\r\n  //读取cookie\r\n  function getCookie(key){\r\n  var arr = document.cookie.split(';')\r\n  for(var i=0;i<arr.length;i++){\r\n   var arr2 = arr[i].split('=');\r\n   if(arr2[0]==key){\r\n  return arr2[1];\r\n   }\r\n  }\r\n  return '';\r\n  }*/\n  //如果有存入的cookie,取出账户名显示在input框;\n  //$('#loginusername').val(getCookie('username'));\n  //查询数据库确认账户密码是否正确\n\n  $(\"#Login_button\").click(function () {\n    console.log(\"running??\");\n    var account = $('#Login_username_input').val();\n    var password = $('#Login_password_input').val(); //这里实现对 username和password格式的判断\n    //........\n    //发送ajax请求 使用post方式发送json字符串给后台login\n\n    $.ajax({\n      type: \"post\",\n      url: \"http://localhost:1993/api/login\",\n      dataType: \"json\",\n      data: {\n        account: account,\n        password: password\n      },\n      success: function (data) {\n        //接受返回的数据，前端判断采取的动作\n        console.log(data.data);\n\n        if (data) {\n          if (data.message == false) {\n            window.location.href = \"#\";\n            alert('帳號密碼錯誤');\n          } else {\n            alert('登入成功，歡迎 ' + data.data.username); //登录成功将用户名存入cookie;\n\n            /*if($('#mycheck').prop('checked')==true){\r\n              setCookie('username',username,7);\r\n            }*/\n\n            window.location.href = \"#\";\n          }\n        }\n      }\n    });\n  });\n});","map":{"version":3,"sources":["/home/tofu/NTUEE-merge/NTUEE-PLUS/src/LoginAction.js"],"names":["$","document","ready","validate","rules","Login_username_input","required","minlength","maxlength","Login_password_input","agree","messages","click","console","log","account","val","password","ajax","type","url","dataType","data","success","message","window","location","href","alert","username"],"mappings":"AAAAA,CAAC,CAACC,QAAD,CAAD,CAAYC,KAAZ,CAAkB,YAAU;AACvBF,EAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBG,QAAhB,CAAyB;AACvBC,IAAAA,KAAK,EAAE;AACNC,MAAAA,oBAAoB,EAAE;AACrBC,QAAAA,QAAQ,EAAE,IADW;AAErBC,QAAAA,SAAS,EAAE,CAFU;AAGrBC,QAAAA,SAAS,EAAE;AAHU,OADhB;AAMNC,MAAAA,oBAAoB,EAAE;AACrBH,QAAAA,QAAQ,EAAE,IADW;AAErBC,QAAAA,SAAS,EAAE;AAFU,OANhB;AAUNG,MAAAA,KAAK,EAAC;AAVA,KADgB;AAavBC,IAAAA,QAAQ,EAAE;AACTN,MAAAA,oBAAoB,EAAE;AACrBC,QAAAA,QAAQ,EAAE,OADW;AAErBC,QAAAA,SAAS,EAAE,QAFU;AAGrBC,QAAAA,SAAS,EAAE;AAHU,OADb;AAMTC,MAAAA,oBAAoB,EAAE;AACrBH,QAAAA,QAAQ,EAAE,OADW;AAErBC,QAAAA,SAAS,EAAE;AAFU;AANb;AAba,GAAzB,EADuB,CA2BvB;;AACE;;;;;;;;;;;;;;;;AAgBF;AACC;AACD;;AACCP,EAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBY,KAAnB,CAAyB,YAAU;AACnCC,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACA,QAAIC,OAAO,GAACf,CAAC,CAAC,uBAAD,CAAD,CAA2BgB,GAA3B,EAAZ;AACA,QAAIC,QAAQ,GAACjB,CAAC,CAAC,uBAAD,CAAD,CAA2BgB,GAA3B,EAAb,CAHmC,CAInC;AACA;AACA;;AACAhB,IAAAA,CAAC,CAACkB,IAAF,CAAO;AACNC,MAAAA,IAAI,EAAE,MADA;AAENC,MAAAA,GAAG,EAAE,iCAFC;AAGNC,MAAAA,QAAQ,EAAE,MAHJ;AAINC,MAAAA,IAAI,EAAC;AAAEP,QAAAA,OAAO,EAACA,OAAV;AAAmBE,QAAAA,QAAQ,EAAEA;AAA7B,OAJC;AAKNM,MAAAA,OAAO,EAAE,UAASD,IAAT,EAAc;AACvB;AACET,QAAAA,OAAO,CAACC,GAAR,CAAYQ,IAAI,CAACA,IAAjB;;AACA,YAAGA,IAAH,EAAQ;AACP,cAAGA,IAAI,CAACE,OAAL,IAAc,KAAjB,EAAuB;AACxBC,YAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAqB,GAArB;AACAC,YAAAA,KAAK,CAAC,QAAD,CAAL;AACE,WAHD,MAGK;AACNA,YAAAA,KAAK,CAAC,aAAWN,IAAI,CAACA,IAAL,CAAUO,QAAtB,CAAL,CADM,CAEN;;AACA;;;;AAGAJ,YAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAqB,GAArB;AACE;AACD;AACF;AArBK,KAAP;AAuBA,GA9BA;AA+BD,CA9EL","sourcesContent":["$(document).ready(function(){\r\n\t\t\t\t\t$(\"#loginForm\").validate({\r\n\t\t\t\t\t\t\trules: {\r\n\t\t\t\t\t\t\t\tLogin_username_input: {\r\n\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\tminlength: 9,\r\n\t\t\t\t\t\t\t\t\tmaxlength: 9\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tLogin_password_input: {\r\n\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\tminlength: 5\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tagree:\"required\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tmessages: {\r\n\t\t\t\t\t\t\t\tLogin_username_input: {\r\n\t\t\t\t\t\t\t\t\trequired: \"請輸入學號\",\r\n\t\t\t\t\t\t\t\t\tminlength: \"學號長度錯誤\",\r\n\t\t\t\t\t\t\t\t\tmaxlength: \"學號長度錯誤\"\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tLogin_password_input: {\r\n\t\t\t\t\t\t\t\t\trequired: \"請輸入密碼\",\r\n\t\t\t\t\t\t\t\t\tminlength: \"密碼長度只少5個字元\"\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t//设置cookie\r\n\t\t\t\t\t  /*function setCookie(name,psw,idate){\r\n\t\t\t\t\t\tvar oDate = new Date();\r\n\t\t\t\t\t\toDate.setDate(oDate.getDate()+idate)\r\n\t\t\t\t\t\tdocument.cookie = name+'='+psw+';expires'+idate;\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t  //读取cookie\r\n\t\t\t\t\t  function getCookie(key){\r\n\t\t\t\t\t\tvar arr = document.cookie.split(';')\r\n\t\t\t\t\t\tfor(var i=0;i<arr.length;i++){\r\n\t\t\t\t\t\t  var arr2 = arr[i].split('=');\r\n\t\t\t\t\t\t  if(arr2[0]==key){\r\n\t\t\t\t\t\t\treturn arr2[1];\r\n\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn '';\r\n\t\t\t\t\t  }*/\r\n\t\t\t\t\t//如果有存入的cookie,取出账户名显示在input框;\r\n\t\t\t\t\t //$('#loginusername').val(getCookie('username'));\r\n\t\t\t\t\t//查询数据库确认账户密码是否正确\r\n\t\t\t\t\t $(\"#Login_button\").click(function(){\r\n\t\t\t\t\t\tconsole.log(\"running??\");\r\n\t\t\t\t\t\tvar account=$('#Login_username_input').val();\r\n\t\t\t\t\t\tvar password=$('#Login_password_input').val();\r\n\t\t\t\t\t\t//这里实现对 username和password格式的判断\r\n\t\t\t\t\t\t//........\r\n\t\t\t\t\t\t//发送ajax请求 使用post方式发送json字符串给后台login\r\n\t\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\t\ttype: \"post\",\r\n\t\t\t\t\t\t\turl: \"http://localhost:1993/api/login\",\r\n\t\t\t\t\t\t\tdataType: \"json\",\r\n\t\t\t\t\t\t\tdata:{ account:account, password: password },\r\n\t\t\t\t\t\t\tsuccess: function(data){\r\n\t\t\t\t\t\t\t//接受返回的数据，前端判断采取的动作\r\n\t\t\t\t\t\t\t  console.log(data.data);\r\n\t\t\t\t\t\t\t  if(data){\r\n\t\t\t\t\t\t\t\t  if(data.message==false){\r\n\t\t\t\t\t\t\t\t\twindow.location.href=\"#\";\r\n\t\t\t\t\t\t\t\t\talert('帳號密碼錯誤')\r\n\t\t\t\t\t\t\t\t  }else{\r\n\t\t\t\t\t\t\t\t\talert('登入成功，歡迎 '+data.data.username);\r\n\t\t\t\t\t\t\t\t\t//登录成功将用户名存入cookie;\r\n\t\t\t\t\t\t\t\t\t/*if($('#mycheck').prop('checked')==true){\r\n\t\t\t\t\t\t\t\t\t  setCookie('username',username,7);\r\n\t\t\t\t\t\t\t\t\t}*/\r\n\t\t\t\t\t\t\t\t\twindow.location.href=\"#\";\r\n\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t})"]},"metadata":{},"sourceType":"module"}